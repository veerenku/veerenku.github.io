"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[890],{890:(st,u,c)=>{c.r(u),c.d(u,{HomePageModule:()=>at});var _=c(6895),p=c(4719),l=c(3236),g=c(9855),m=c(5861),t=c(6353);let f=(()=>{class n{constructor(e){this.toastController=e}calculateAmt(e){return e.map(i=>{i.gTotal=0,i.details.expences.map(o=>{i.gTotal+=o.price})}),e}toast(e){var i=this;return(0,m.Z)(function*(){(yield i.toastController.create({color:e.color,duration:2e3,animated:!0,translucent:!0,keyboardClose:!0,message:e.msg,icon:"success"===e.color?"shield-checkmark-outline":"warning-outline"})).present()})()}randomNo(){return Math.floor(1e3+9e3*Math.random())}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(l.yF))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=c(849);let x=(()=>{class n{constructor(e){this.storage=e,console.log("Your storage provider is working here !"),this.storage.create()}set(e,i){var o=this;return(0,m.Z)(function*(){try{return yield o.storage.set(e,i),!0}catch(s){return console.log(s),!1}})()}get(e){var i=this;return(0,m.Z)(function*(){try{return(yield i.storage.get(e))??null}catch(o){return console.log(o),null}})()}setObject(e,i){var o=this;return(0,m.Z)(function*(){try{return yield o.storage.set(e,JSON.stringify(i)),!0}catch(s){return console.log(s),!1}})()}getObject(e){var i=this;return(0,m.Z)(function*(){try{const o=yield i.storage.get(e);return null!=o?JSON.parse(o):null}catch(o){return console.log(o),null}})()}remove(e){this.storage.remove(e)}clear(){this.storage.clear()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D(n,a){if(1&n&&(t.TgZ(0,"h2"),t._uU(1),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.AsE("\u20b9 ",e.detailsData.gTotal," / ",null==e.membersData?null:e.membersData.length," = \u20b9 "),t.xp6(2),t.Oqu(t.xi3(4,3,e.detailsData.gTotal/(null==e.membersData?null:e.membersData.length),"0.1-2"))}}function M(n,a){1&n&&(t.TgZ(0,"h2"),t._uU(1,"\u20b9 "),t.TgZ(2,"strong"),t._uU(3,"0"),t.qZA()())}function b(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function T(n,a){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.YNc(2,b,2,0,"span",11),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(4);t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",i+1<o.membersData.length)}}function Z(n,a){if(1&n&&(t.TgZ(0,"h3"),t.YNc(1,T,3,2,"strong",25),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.membersData)}}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.addNew("mem"))}),t._UZ(1,"ion-icon",27),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("disabled",e.detailsConf.isAddMembers)}}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.cancelBtn("add-mem"))}),t._UZ(1,"ion-icon",29),t.qZA()}}function v(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.editMembers())}),t._UZ(1,"ion-icon",30),t.qZA()}}function J(n,a){1&n&&(t.TgZ(0,"ion-col",31)(1,"h3",32)(2,"i"),t._uU(3,"None added yet"),t.qZA()()())}function I(n,a){if(1&n&&(t.TgZ(0,"ion-grid",6)(1,"ion-row")(2,"ion-col",19)(3,"h2",20),t._uU(4,"Members:"),t.qZA(),t.YNc(5,Z,2,1,"h3",11),t.qZA(),t.TgZ(6,"ion-col",21),t.YNc(7,A,2,1,"ion-button",22),t.YNc(8,w,2,0,"ion-button",23),t.YNc(9,v,2,0,"ion-button",23),t.qZA(),t.YNc(10,J,4,0,"ion-col",24),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.membersData.length>0),t.xp6(2),t.Q6J("ngIf",!e.detailsConf.editMembersList),t.xp6(1),t.Q6J("ngIf",e.detailsConf.editMembersList),t.xp6(1),t.Q6J("ngIf",e.membersData.length>0&&!e.detailsConf.editMembersList),t.xp6(1),t.Q6J("ngIf",0===e.membersData.length)}}function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.cancelBtn("mem"))}),t._UZ(1,"ion-icon",29),t.qZA()}}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.addMemData())}),t._UZ(1,"ion-icon",36),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("disabled",!e.detailsConf.isAddMembers||!e.detailsConf.isAddedMem||""===e.detailsConf.memModel)}}function q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid",6)(1,"ion-row",33)(2,"ion-col",31)(3,"h2",20),t._uU(4,"Add a Member"),t.qZA()(),t.TgZ(5,"ion-col",19)(6,"ion-input",34),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.detailsConf.memModel=o)})("ngModelChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.needToAdd("mem"))}),t.qZA()(),t.TgZ(7,"ion-col",35),t.YNc(8,y,2,0,"ion-button",23),t.YNc(9,N,2,1,"ion-button",22),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngModel",e.detailsConf.memModel),t.xp6(2),t.Q6J("ngIf",e.detailsConf.isAddMembers),t.xp6(1),t.Q6J("ngIf",e.detailsConf.isAddMembers)}}function k(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid",6)(1,"ion-row",33)(2,"ion-col",19)(3,"ion-input",38),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).$implicit;return t.KtG(r.name=o)}),t.qZA()(),t.TgZ(4,"ion-col",21)(5,"ion-button",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.confirmDelete(s.id,"mem"))}),t._UZ(6,"ion-icon",39),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(3),t.s9C("value",e.name),t.Q6J("ngModel",e.name)("disabled",e.name),t.xp6(2),t.Q6J("disabled",e.hasPaid)}}function U(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,k,7,4,"ion-grid",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.membersData)}}function P(n,a){if(1&n&&(t.TgZ(0,"ion-card",17)(1,"ion-card-content"),t.YNc(2,I,11,5,"ion-grid",18),t.YNc(3,q,10,3,"ion-grid",18),t.YNc(4,U,2,1,"div",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.detailsConf.isAddMembers),t.xp6(1),t.Q6J("ngIf",e.detailsConf.isAddMembers),t.xp6(1),t.Q6J("ngIf",e.detailsConf.editMembersList)}}function H(n,a){if(1&n&&(t.TgZ(0,"ion-select-option",50),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.s9C("value",e.name),t.xp6(1),t.hij("",e.name," ")}}function O(n,a){if(1&n&&(t.TgZ(0,"ion-select-option",51),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("value",e.name)("disabled",i.detailsConf.spentByModel===e.name||i.detailsConf.spentByModel!==e.name),t.xp6(1),t.hij(" ",e.name," ")}}function Y(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Add"),t.qZA())}function E(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Edit"),t.qZA())}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cancelBtn("exp"))}),t._UZ(1,"ion-icon",29),t.qZA()}}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.okExpData())}),t._UZ(1,"ion-icon",36),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",""===e.detailsConf.itemModel||""===e.detailsConf.amtModel||""===e.detailsConf.spentByModel||0===(null==e.detailsConf.shareWithModel?null:e.detailsConf.shareWithModel.length))}}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card",40)(1,"ion-card-content")(2,"ion-grid",6)(3,"ion-row")(4,"ion-col",7)(5,"h2")(6,"ion-input",41),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.detailsConf.itemModel=o)})("ionChange",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.needToAdd("exp"))}),t.qZA()()(),t.TgZ(7,"ion-col",9)(8,"h2"),t._uU(9,"\u20b9 "),t.TgZ(10,"ion-input",42),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.detailsConf.amtModel=o)})("ionChange",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.needToAdd("amt"))}),t.qZA()()(),t.TgZ(11,"ion-col",7)(12,"h2",43),t._uU(13,"Paid by"),t.qZA()(),t.TgZ(14,"ion-col",9)(15,"h2")(16,"ion-select",44),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.detailsConf.spentByModel=o)})("ionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.spentByOnChange(o))}),t.YNc(17,H,2,2,"ion-select-option",45),t.qZA()()(),t.TgZ(18,"ion-col",7)(19,"h2"),t._uU(20,"Share it with"),t.qZA()(),t.TgZ(21,"ion-col",9)(22,"h2")(23,"ion-select",46),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.detailsConf.shareWithModel=o)})("ionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.shareOnChange(o))}),t.YNc(24,O,2,3,"ion-select-option",47),t.qZA()()()(),t.TgZ(25,"ion-row")(26,"ion-col",48)(27,"p",43)(28,"strong"),t.YNc(29,Y,2,0,"span",11),t.YNc(30,E,2,0,"span",11),t._uU(31," this Expence"),t.qZA()()(),t.TgZ(32,"ion-col",49),t.YNc(33,Q,2,0,"ion-button",23),t.YNc(34,F,2,1,"ion-button",22),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.detailsConf.itemModel),t.xp6(4),t.Q6J("ngModel",e.detailsConf.amtModel),t.xp6(6),t.Q6J("ngModel",e.detailsConf.spentByModel),t.xp6(1),t.Q6J("ngForOf",e.membersData),t.xp6(6),t.Q6J("ngModel",e.detailsConf.shareWithModel)("disabled",!e.detailsConf.spentByModel)("interfaceOptions",e.customShareOpt),t.xp6(1),t.Q6J("ngForOf",e.membersData),t.xp6(5),t.Q6J("ngIf",0===e.detailsConf.editExpenceId),t.xp6(1),t.Q6J("ngIf",0!==e.detailsConf.editExpenceId),t.xp6(3),t.Q6J("ngIf",e.detailsConf.isAddExpence),t.xp6(1),t.Q6J("ngIf",e.detailsConf.isAddExpence)}}function S(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function G(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,S,2,0,"span",11),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw().$implicit;t.xp6(1),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i+1<o.shareWith.length)}}function W(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card",54)(1,"ion-card-content")(2,"ion-grid",6)(3,"ion-row")(4,"ion-col",7)(5,"h2")(6,"strong"),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-col",9)(9,"h2")(10,"strong"),t._uU(11),t.qZA()()(),t.TgZ(12,"ion-col",7)(13,"h2"),t._uU(14,"Paid by"),t.qZA()(),t.TgZ(15,"ion-col",9)(16,"h2")(17,"strong"),t._uU(18),t.qZA()()(),t.TgZ(19,"ion-col",7)(20,"h2"),t._uU(21,"Share it with"),t.qZA()(),t.TgZ(22,"ion-col",9)(23,"h2")(24,"strong"),t.YNc(25,G,3,2,"span",25),t.qZA()()()(),t.TgZ(26,"ion-row")(27,"ion-col",48)(28,"p",43)(29,"strong"),t._uU(30),t.ALo(31,"date"),t.qZA()()(),t.TgZ(32,"ion-col",49)(33,"ion-button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.confirmDelete(s.id,"exp"))}),t._UZ(34,"ion-icon",39),t.qZA(),t.TgZ(35,"ion-button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.editItem(s))}),t._UZ(36,"ion-icon",30),t.qZA()()()()()()}if(2&n){const e=a.$implicit;t.xp6(7),t.Oqu(e.name),t.xp6(4),t.hij("\u20b9 ",e.price,""),t.xp6(7),t.Oqu(e.paidBy),t.xp6(7),t.Q6J("ngForOf",e.shareWith),t.xp6(5),t.Oqu(t.xi3(31,5,e.date,"MMM d, y, h:mm a"))}}function K(n,a){if(1&n&&(t.TgZ(0,"div",52),t.YNc(1,W,37,8,"ion-card",53),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.expenceData)}}function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-fab-button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addNew("exp"))}),t._UZ(1,"ion-icon",56),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.detailsConf.isAddExpence||e.detailsConf.isAddMembers||e.detailsConf.editMembersList)}}let $=(()=>{class n{constructor(e,i,o,s,r){this.router=e,this.route=i,this.utilService=o,this.storageService=s,this.alertController=r,this.detailsConf={isAddMembers:!1,isAddExpence:!1,isAddedMem:!1,isAddedExp:!1,editMembersList:!1,editExpenceId:0,expenceDate:0,memModel:"",itemModel:"",amtModel:"",priceModel:"",shareWithModel:[],spentByModel:""},this.tripData=[],this.detailsData=[],this.membersData=[],this.expenceData=[],this.customShareOpt={header:"Share it with"}}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.getExistingData()}goBack(){this.router.navigate([""])}getExistingData(){this.storageService.get("tripData").then(e=>{if(null!=e){const i=e;if(i?.length>0)return this.tripData=i,void this.getDetailsData()}else this.router.navigate(["/home"])}).catch(e=>{console.log("error: "+e)})}getDetailsData(){this.tripData.map(e=>{e.id===this.id&&(console.log(e),this.detailsData=e,this.membersData=this.detailsData.details.members,this.expenceData=this.detailsData.details.expences,this.getShareDefault())})}getShareDefault(){this.detailsConf.shareWithModel=[],0===this.detailsConf.shareWithModel?.length&&this.membersData.map(e=>{this.detailsConf.shareWithModel.push(e.name)}),console.log(this.detailsConf.shareWithModel,"on default call")}calAmt(){this.tripData=this.utilService.calculateAmt(this.tripData)}addNew(e){"mem"===e?this.detailsConf.isAddMembers=!0:"exp"===e&&(this.detailsConf.isAddExpence=!0,this.getShareDefault())}cancelBtn(e){"exp"===e?(this.detailsConf.isAddExpence=!1,console.log(this.detailsData,"this.detailsData on delete"),this.detailsConf.itemModel="",this.detailsConf.amtModel="",this.detailsConf.spentByModel="",this.detailsConf.shareWithModel=[],this.detailsConf.editExpenceId=0,this.detailsConf.expenceDate=0):"mem"===e?(this.detailsConf.isAddMembers=!1,console.log(this.detailsData,"this.detailsData on delete"),this.detailsConf.memModel=""):"add-mem"===e&&(this.detailsConf.editMembersList=!1)}needToAdd(e){"mem"===e?this.detailsConf.isAddedMem=!0:"exp"===e?this.detailsConf.isAddedExp=!0:"amt"===e&&(console.log(typeof this.detailsConf.amtModel,"check num"),"number"!=typeof this.detailsConf.amtModel&&(this.detailsConf.amtModel=""))}addMemData(){const e={name:this.detailsConf.memModel,isShare:!0,id:0,hasPaid:!1,unbalancedId:[]};e.id=this.utilService.randomNo(),this.membersData?.length>0&&-1!==this.membersData.findIndex(o=>o.name===e.name)?this.utilService.toast({color:"warning",msg:"User Already Present"}):(this.membersData.push(e),this.expenceData.map(i=>{-1===i.shareWith.findIndex(s=>s===e.name)?i.shareWith.push(e.name):this.utilService.toast({color:"warning",msg:"User Already Present"})}),this.updateMemUnbalanced(),this.saveData(),this.detailsConf.isAddMembers=!1,this.detailsConf.isAddedMem=!1,this.detailsConf.memModel="")}okExpData(){0===this.detailsConf.editExpenceId&&(this.detailsConf.expenceDate=(new Date).getTime());const e={name:this.detailsConf.itemModel,price:Number(this.detailsConf.amtModel),date:this.detailsConf.expenceDate,paidBy:this.detailsConf.spentByModel,shareWith:this.detailsConf.shareWithModel,id:0};0===this.detailsConf.editExpenceId?(e.id=this.utilService.randomNo(),this.expenceData.unshift(e)):this.expenceData.map(i=>{i.id===this.detailsConf.editExpenceId&&(i.name=this.detailsConf.itemModel,i.price=Number(this.detailsConf.amtModel),i.date=this.detailsConf.expenceDate,i.paidBy=this.detailsConf.spentByModel,i.shareWith=this.detailsConf.shareWithModel)}),this.updateMemPaid(),this.updateMemUnbalanced(),this.calAmt(),this.saveData(),this.detailsConf.isAddExpence=!1,this.detailsConf.isAddedExp=!1,this.detailsConf.itemModel="",this.detailsConf.amtModel="",this.detailsConf.spentByModel="",this.detailsConf.shareWithModel=[],this.detailsConf.memModel="",this.detailsConf.editExpenceId=0}editItem(e){this.detailsConf.isAddExpence=!0,this.detailsConf.editExpenceId=e.id,this.detailsConf.expenceDate=e.date,this.detailsConf.itemModel=e.name,this.detailsConf.amtModel=e.price,this.detailsConf.spentByModel=e.paidBy,this.detailsConf.shareWithModel=e.shareWith}removeItem(e,i){if("exp"===i){let o,s=0;const r=this.expenceData.findIndex(d=>d.id===e);this.expenceData.map(d=>{d.id===e&&(o=d.paidBy,this.expenceData.splice(r,1)),this.expenceData.map(h=>{h.paidBy===o&&s++})}),0===s&&this.membersData.map(d=>{d.name===o&&(d.hasPaid=!1)})}else if("mem"===i){let o;const s=this.membersData.findIndex(r=>r.id===e);this.membersData.map(r=>{r.id===e&&(o=r.name,this.membersData.splice(s,1))}),0===this.membersData.length&&(this.detailsConf.editMembersList=!1),this.expenceData.map(r=>{const d=r.shareWith.findIndex(h=>h===o);r.shareWith.map(h=>{h===o&&r.shareWith.splice(d,1)})})}this.updateMemUnbalanced(),this.calAmt(),this.saveData(),this.getDetailsData()}spentByOnChange(e){console.log(this.detailsConf.spentByModel,e.detail),this.detailsConf.spentByModel=e.detail.value}shareOnChange(e){console.log(this.detailsConf.shareWithModel,e,"share on change")}saveData(){this.storageService.set("tripData",this.tripData).then(e=>{console.log("Data is saved"),this.utilService.toast({color:"success",msg:"Updated Successfully"})}).catch(e=>{console.log("error: "+e)})}editMembers(){this.detailsConf.editMembersList=!0}confirmDelete(e,i){var o=this;return(0,m.Z)(function*(){yield(yield o.alertController.create({header:"Please confirm",backdropDismiss:!1,message:"Are you sure want to delete this record?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Delete",cssClass:"danger",handler:()=>{o.removeItem(e,i)}}]})).present()})()}updateMemPaid(){this.membersData.map(e=>{let i=0;this.expenceData.map(o=>{o.paidBy===e.name&&i++}),e.hasPaid=i>0}),console.log(this.membersData,"xxpp data")}updateMemUnbalanced(){this.membersData.map(e=>{e.unbalancedId=[],e.p=[],e.tp=0,this.expenceData.map(i=>{i.shareWith?.length>0&&i.shareWith.findIndex(s=>s===e.name)>-1&&!1===e.unbalancedId.includes(i.id)&&(e.unbalancedId.push(i.id),e.p.push(i.price))}),e.tp=e.p.reduce((i,o)=>i+o,0)}),this.calculateBalanced()}calculateUnbalanced(){}calculateBalanced(){const e=this.expenceData.reduce((i,o)=>(i[o.shareWith]=[...i[o.shareWith]||[],o],i),{});console.log("group",e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(f),t.Y36(x),t.Y36(l.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-details"]],decls:28,vars:8,consts:[[1,"gradientfill","ts-header"],["slot","start",1,"ion-no-padding"],["name","chevron-back-outline",1,"ts-icon-btn",3,"click"],[1,"ts-transform-cap"],[1,"ion-padding","ts-details","ts-page"],[1,"gradientfill","gT-card"],[1,"ion-no-padding"],["size","6",1,"ion-align-self-start"],[1,"ion-no-margin","ts-transform-cap"],["size","6",1,"ion-align-self-start","ion-text-right"],[1,"ion-no-margin"],[4,"ngIf"],["color","medium",4,"ngIf"],["class","ion-margin-top ts-expence-card","color","medium",4,"ngIf"],["class","ion-margin-top",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["class","gradientfill",3,"disabled","click",4,"ngIf"],["color","medium"],["class","ion-no-padding",4,"ngIf"],["size","8",1,"ion-align-self-start"],[1,"ts-text-bold"],["size","4",1,"ion-align-self-start","ion-text-right"],["color","transparent","class","ion-no-padding",3,"disabled","click",4,"ngIf"],["color","transparent","class","ion-no-padding",3,"click",4,"ngIf"],["class","ion-align-self-start","size","12",4,"ngIf"],[4,"ngFor","ngForOf"],["color","transparent",1,"ion-no-padding",3,"disabled","click"],["color","success","name","person-add-outline"],["color","transparent",1,"ion-no-padding",3,"click"],["color","danger","name","close-outline"],["color","warning","name","pencil-outline"],["size","12",1,"ion-align-self-start"],[1,"ion-text-center"],[1,"ion-padding-bottom"],["placeholder","who is it ...",3,"ngModel","ngModelChange"],["size","4",1,"ion-text-right"],["color","success","name","checkmark-outline"],["class","ion-no-padding",4,"ngFor","ngForOf"],["placeholder","who is it ...",3,"value","ngModel","disabled","ngModelChange"],["color","danger","name","trash-outline"],["color","medium",1,"ion-margin-top","ts-expence-card"],["placeholder","what is it ...","color","primary",1,"ts-input-item","ion-no-padding",3,"ngModel","ngModelChange","ionChange"],["placeholder","how much is it ...","type","number","pattern","[0-9]*","maxlength","5","color","primary",1,"ts-input-item","ion-no-padding",3,"ngModel","ngModelChange","ionChange"],[1,"ts-padd-paid"],["placeholder","Select One","cancelText","Cancel","okText","Okay!","interface","popover","color","primary",1,"ion-no-padding","ts-padd-paid",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","true","cancelText","Cancel","okText","Okay!","color","primary",1,"ion-no-padding","ts-share-it",3,"ngModel","disabled","interfaceOptions","ngModelChange","ionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"ion-align-self-start"],[1,"ion-align-self-start","ion-text-right"],[3,"value"],[3,"value","disabled"],[1,"ion-margin-top"],["class","ts-expence-text ion-margin-bottom","color","medium",4,"ngFor","ngForOf"],["color","medium",1,"ts-expence-text","ion-margin-bottom"],[1,"gradientfill",3,"disabled","click"],["name","add"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-icon",2),t.NdJ("click",function(){return i.goBack()}),t.qZA()(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-content",4)(7,"ion-card",5)(8,"ion-card-content")(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"h2",8),t._uU(13,"Grand total"),t.qZA(),t.TgZ(14,"h2"),t._uU(15,"Per Person"),t.qZA()(),t.TgZ(16,"ion-col",9)(17,"h2",10),t._uU(18,"\u20b9 "),t.TgZ(19,"strong"),t._uU(20),t.qZA()(),t.YNc(21,D,5,6,"h2",11),t.YNc(22,M,4,0,"h2",11),t.qZA()()()()(),t.YNc(23,P,5,3,"ion-card",12),t.YNc(24,B,35,12,"ion-card",13),t.YNc(25,K,2,1,"div",14),t.TgZ(26,"ion-fab",15),t.YNc(27,z,2,1,"ion-fab-button",16),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(i.detailsData.title),t.xp6(15),t.Oqu(i.detailsData.gTotal),t.xp6(1),t.Q6J("ngIf",(null==i.membersData?null:i.membersData.length)>0),t.xp6(1),t.Q6J("ngIf",0===(null==i.membersData?null:i.membersData.length)),t.xp6(1),t.Q6J("ngIf",!i.detailsConf.isAddExpence),t.xp6(1),t.Q6J("ngIf",i.detailsConf.isAddExpence),t.xp6(1),t.Q6J("ngIf",(null==i.expenceData?null:i.expenceData.length)>0&&0===i.detailsConf.editExpenceId&&!i.detailsConf.isAddExpence&&!i.detailsConf.isAddMembers&&!i.detailsConf.editMembersList),t.xp6(2),t.Q6J("ngIf",(null==i.membersData?null:i.membersData.length)>0))},dependencies:[_.sg,_.O5,p.JJ,p.nD,p.c5,p.On,l.YG,l.Sm,l.PM,l.FN,l.wI,l.W2,l.IJ,l.W4,l.jY,l.Gu,l.gu,l.pK,l.Nd,l.t9,l.n0,l.wd,l.sr,l.as,l.QI,l.j9,_.JJ,_.uU],styles:[".ts-input-width-100[_ngcontent-%COMP%]{width:100px;font-weight:700;display:inline-block;border-bottom:2px dashed}.ts-input-item[_ngcontent-%COMP%]{width:70%;font-weight:700;display:inline-block;border-bottom:2px dashed}.ts-padd-paid[_ngcontent-%COMP%]{padding-top:10px}.ts-expence-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:35px;font-size:16px}.ts-expence-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:30px}.ts-details[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-bottom:2px dashed}.ts-page[_ngcontent-%COMP%] > ion-card[_ngcontent-%COMP%]:nth-child(2){margin-top:120px!important}.gT-card[_ngcontent-%COMP%]{position:fixed;top:56px;left:0;right:0;margin:0;z-index:100;border-bottom:1px solid #898989;border-radius:0 0 40px 40px}"]}),n})();function L(n,a){1&n&&(t.TgZ(0,"h2",6)(1,"ion-text",7),t._uU(2,"No Trips Yet !!!"),t.qZA()())}function j(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",11)(2,"h2",12),t._uU(3),t.qZA(),t.TgZ(4,"h4"),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"ion-col",13)(8,"h2"),t._uU(9,"Total Amt: \u20b9 "),t.TgZ(10,"strong"),t._uU(11),t.qZA()(),t.TgZ(12,"ion-button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.confirmDelTrip(o))}),t._UZ(13,"ion-icon",15),t.qZA(),t.TgZ(14,"ion-button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.gotoDetails(o))}),t._UZ(15,"ion-icon",16),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Oqu(t.xi3(6,3,e.date,"MMMM d, y")),t.xp6(6),t.Oqu(e.gTotal)}}function R(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.removeTripData(o))}),t._UZ(1,"ion-icon",22),t.qZA()}}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.addTripData(o))}),t._UZ(1,"ion-icon",24),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("disabled",!e.homeConf.isAddInprogress||!e.homeConf.isAdded||""===e.homeConf.addTitle)}}function V(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",17)(2,"ion-input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.homeConf.addTitle=o)})("ionChange",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onAdd())}),t.qZA()(),t.TgZ(3,"ion-col",19),t.YNc(4,R,2,0,"ion-button",20),t.YNc(5,X,2,1,"ion-button",21),t.qZA()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngModel",i.homeConf.addTitle),t.xp6(2),t.Q6J("ngIf",i.homeConf.isAddInprogress&&!e.title),t.xp6(1),t.Q6J("ngIf",i.homeConf.isAddInprogress&&!e.title)}}function tt(n,a){if(1&n&&(t.TgZ(0,"ion-card",9)(1,"ion-card-content")(2,"ion-grid",10),t.YNc(3,j,16,6,"ion-row",3),t.YNc(4,V,6,3,"ion-row",3),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(3),t.Q6J("ngIf",e.title),t.xp6(1),t.Q6J("ngIf",!e.title)}}function et(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,tt,5,2,"ion-card",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tripData)}}function nt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-fab-button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTrip())}),t._UZ(1,"ion-icon",26),t.qZA()}}const it=[{path:"",component:(()=>{class n{constructor(e,i,o,s){this.storageService=e,this.utilService=i,this.router=o,this.alertController=s,this.homeConf={isAddInprogress:!1,isAdded:!1,addTitle:""},this.tripData=[]}ngOnInit(){this.getExistingData()}ionViewWillEnter(){this.getExistingData()}getExistingData(){this.storageService.get("tripData").then(e=>{if(null!=e){const i=e;i?.length>0&&(this.tripData=i,this.calAmt())}}).catch(e=>{console.log("error: "+e)})}calAmt(){this.tripData=this.utilService.calculateAmt(this.tripData)}addTrip(){const e={id:this.utilService.randomNo()};this.tripData.unshift(e),this.homeConf.isAddInprogress=!0,console.log(this.tripData,"this.tripData")}onAdd(){this.homeConf.isAdded=!0}addTripData(e){e.date=(new Date).getTime(),e.title=this.homeConf.addTitle,e.gTotal=0,e.details={expences:[],members:[]},this.updateData(),this.homeConf.isAddInprogress=!1,this.homeConf.isAdded=!1,this.homeConf.addTitle=""}updateData(){this.storageService.set("tripData",this.tripData).then(e=>{console.log("Data is saved"),this.utilService.toast({color:"success",msg:"Updated Successfully"})}).catch(e=>{console.log("error: "+e)})}removeTripData(e){this.homeConf.isAddInprogress=!1,this.homeConf.addTitle="",this.tripData.shift(),console.log(this.tripData,"this.tripData on delete")}gotoDetails(e){null!=e.title&&(console.log(e,"param details"),this.router.navigate(["/"+e.id]))}removeThisTrip(e){const i=this.tripData.findIndex(o=>o.id===e.id);this.tripData.splice(i,1),this.updateData()}confirmDelTrip(e){var i=this;return(0,m.Z)(function*(){yield(yield i.alertController.create({header:"Please confirm",backdropDismiss:!1,message:"Are you sure want to delete this data?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Delete",cssClass:"danger",handler:()=>{i.removeThisTrip(e)}}]})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x),t.Y36(f),t.Y36(g.F0),t.Y36(l.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:9,vars:3,consts:[["color","light",1,"ts-header"],[1,"ion-padding","ts-page"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["class","gradientfill",3,"click",4,"ngIf"],[1,"ion-text-center"],["color","primary"],["class","ion-margin-bottom ts-tripdata gradientfill",4,"ngFor","ngForOf"],[1,"ion-margin-bottom","ts-tripdata","gradientfill"],[1,"ion-no-padding"],[1,"ion-align-self-start"],[1,"ts-transform-cap"],[1,"ion-text-end"],["color","transparent",1,"ion-no-padding",3,"click"],["color","light","name","trash-outline"],["color","light","name","chevron-forward-outline"],["size","6",1,"ion-align-self-start"],["placeholder","Where to ...",3,"ngModel","ngModelChange","ionChange"],["size","6",1,"ion-text-end"],["color","transparent","class","ion-no-padding",3,"click",4,"ngIf"],["color","transparent","class","ion-no-padding",3,"disabled","click",4,"ngIf"],["color","light","name","close-outline"],["color","transparent",1,"ion-no-padding",3,"disabled","click"],["color","light","name","checkmark-outline"],[1,"gradientfill",3,"click"],["name","add"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Home"),t.qZA()()(),t.TgZ(4,"ion-content",1),t.YNc(5,L,3,0,"h2",2),t.YNc(6,et,2,1,"div",3),t.TgZ(7,"ion-fab",4),t.YNc(8,nt,2,0,"ion-fab-button",5),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",0===(null==i.tripData?null:i.tripData.length)),t.xp6(1),t.Q6J("ngIf",(null==i.tripData?null:i.tripData.length)>0),t.xp6(2),t.Q6J("ngIf",!i.homeConf.isAddInprogress))},dependencies:[_.sg,_.O5,p.JJ,p.On,l.YG,l.PM,l.FN,l.wI,l.W2,l.IJ,l.W4,l.jY,l.Gu,l.gu,l.pK,l.Nd,l.yW,l.wd,l.sr,l.j9,_.uU]}),n})()},{path:":id",component:$}];let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(it),g.Bz]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,p.u5,l.Pc,ot]}),n})()}}]);